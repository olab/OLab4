'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var NetworkError=use('./NetworkError.js');var Request=use('./Request.js');var Response=use('./Response.js');var Errors={NetworkError:NetworkError};module.exports=function(){function HttpClient(){var credentials=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'default';_classCallCheck(this,HttpClient);this.credentials=credentials}_createClass(HttpClient,[{key:'createRequest',value:function createRequest(method,url,body,headers){return HttpClient.createRequest(method,url,body,headers)}},{key:'createResponse',value:function createResponse(status,body,headers,request){return HttpClient.createResponse(status,body,headers,request)}},{key:'makeRequest',value:function makeRequest(request){var _this=this;if(request instanceof Request===false){throw new TypeError('HttpClient#makeRequest expects a Request object.')}var config={method:request.method,headers:request.headers.all(),body:request.body,credentials:this.credentials,mode:'same-origin'};return fetch(request.url,config).then(function(response){return response.arrayBuffer().then(function(buffer){return _this.createResponse(response.status,buffer,response.headers,request)})}).catch(function(error){throw new NetworkError('HTTP request failed: '+request.url,request,error)})}}],[{key:'createRequest',value:function createRequest(method,url,body,headers){return new Request(method,url,body,headers)}},{key:'createResponse',value:function createResponse(status,body,headers,request){return new Response(status,body,headers,request)}},{key:'Errors',get:function get(){return Object.freeze(Errors)}}]);return HttpClient}();