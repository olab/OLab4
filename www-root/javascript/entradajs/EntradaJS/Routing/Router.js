'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var PathGenerator=use('./PathGenerator');var PathMatcher=use('./PathMatcher');var Route=use('./Route');var RouteCollection=use('./RouteCollection');var RouteCompiler=use('./RouteCompiler');module.exports=function(){function Router(){_classCallCheck(this,Router);this.routes=new RouteCollection;this.matchedRoute=null}_createClass(Router,[{key:'newRoute',value:function newRoute(pattern){var defaults=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var requirements=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var meta=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};return new Route(pattern,defaults,requirements,meta)}},{key:'newCollection',value:function newCollection(prefix){var routes=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var collections=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];return new RouteCollection(prefix,routes,collections)}},{key:'addRoute',value:function addRoute(route){this.routes.addRoute(route)}},{key:'addRoutes',value:function addRoutes(routes){this.routes.addRoutes(routes)}},{key:'addRouteCollection',value:function addRouteCollection(collection){this.routes.addCollection(collection)}},{key:'addRouteCollections',value:function addRouteCollections(collections){this.routes.addCollections(collections)}},{key:'getRoutes',value:function getRoutes(){return this.routes.getRoutes()}},{key:'findRouteByName',value:function findRouteByName(name){var routes=this.routes.getFlattenedRoutes();var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=routes[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var route=_step.value;if(route.getName()===name){return route}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return null}},{key:'match',value:function match(path){var matcher=new PathMatcher(this.routes);var route=matcher.match(path);if(route){route=this.compile(route,path);this.matchedRoute=route}return route}},{key:'generate',value:function generate(name,args){var generator=new PathGenerator(this.routes);return generator.generate(name,args)}},{key:'compile',value:function compile(route,path){var compiler=new RouteCompiler;return compiler.compile(route,path)}},{key:'getGenerator',value:function getGenerator(){return new PathGenerator(this.routes)}},{key:'getMatcher',value:function getMatcher(){return new PathMatcher(this.routes)}},{key:'getMatchedRoute',value:function getMatchedRoute(){return this.matchedRoute}}]);return Router}();