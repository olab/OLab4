'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}module.exports=function(){function VueHandler(loader){_classCallCheck(this,VueHandler);this.loader=loader}_createClass(VueHandler,[{key:'handle',value:function handle(filename,file){var _this=this;var script=this.findScript(filename,file);var dependencies=this.loader.findDependencies(filename,script);return this.loader.bulkLoad(dependencies).then(function(){return _this.parse(filename,file)})}},{key:'findScript',value:function findScript(filename,file){var $fragment=jQuery(file);return $fragment.filter('script').text()}},{key:'parse',value:function parse(filename,file){var _this2=this;var contextFilename=filename;var use=function use(filename){filename=_this2.loader.resolveFilename(filename,contextFilename);return _this2.loader.cache[filename]};var $fragment=jQuery(file);var template=$fragment.filter('template').html();var script=$fragment.filter('script').text();var style=$fragment.filter('style');jQuery(document.head).append(style);template=jQuery.trim(template);script=jQuery.trim(script);var module={};script+='//# sourceURL='+contextFilename;eval(script);var component=module.exports;component.template=template;return Vue.extend(component)}}]);return VueHandler}();